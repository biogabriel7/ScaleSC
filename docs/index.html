<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="ScaleSC Package">
        <meta name="author" content="Haotian Zhang">
        <link rel="canonical" href="https://github.com/interactivereport/scaleSC/tree/main/">
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>ScaleSC</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/fontawesome.min.css" rel="stylesheet">
        <link href="css/brands.min.css" rel="stylesheet">
        <link href="css/solid.min.css" rel="stylesheet">
        <link href="css/v4-font-face.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body class="homepage">
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href=".">ScaleSC</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="." class="nav-link active" aria-current="page">Get Started</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">API Reference</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="api-docs/" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="api-docs/pp/" class="dropdown-item">scalesc.pp</a>
</li>
                                    
<li>
    <a href="api-docs/harmony_gpu.md" class="dropdown-item">scalesc.harmony_gpu</a>
</li>
                                    
<li>
    <a href="api-docs/trim_merge_marker/" class="dropdown-item">scalesc.trim_merge_marker</a>
</li>
                                    
<li>
    <a href="api-docs/kernels/" class="dropdown-item">scalesc.kernels</a>
</li>
                                    
<li>
    <a href="api-docs/util/" class="dropdown-item">scalesc.util</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" class="nav-link disabled">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="api-docs/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/interactivereport/scaleSC/docs/index.md" class="nav-link">Edit on Github
                                    </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#welcome-to-scalesc" class="nav-link">Welcome to ScaleSC</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#highlights" class="nav-link">Highlights</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#why-scalesc" class="nav-link">Why ScaleSC</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#how-to-install" class="nav-link">How To Install</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#tutorial" class="nav-link">Tutorial</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<!-- markdownlint-disable MD033 MD041 -->
<h1 id="welcome-to-scalesc">Welcome to ScaleSC</h1>
<h1 align="center">
    ScaleSC
</h1>

<p align="center">
    <strong>A GPU-accelerated tool for large scale scRNA-seq pipeline.</strong>
</p>

<p align="center">
  <a href="#highlights">Highlights</a> •
  <a href="#why-scalesc">Why ScaleSC</a> •
  <a href="#how-to-install">Installation</a> •
  <a href="api-docs">API Reference</a>
</p>

<h2 id="highlights"><strong>Highlights</strong></h2>
<ul>
<li>Fast scRNA-seq pipeline including QC, Normalization, Batch-effect Removal, Dimension Reduction in a similar syntax as <code>scanpy</code> and <code>rapids-singlecell</code>.</li>
<li>Scale to dataset with more than 10M cells. Chunk the data to avoid the <code>int32</code> limitation in <code>cupyx.scipy.sparse</code> used by <code>rapids-singlecell</code> that disables the computing for even moderate-size dataset (~1M).</li>
<li>Reconcile output at each step to <code>scanpy</code> to reproduce the same results as on CPU end.</li>
<li>Improvement on <code>harmonypy</code> which allows dataset with more than 10M cells and more than 1000 samples to be run on a single GPU (A100 80G).</li>
</ul>
<h2 id="why-scalesc"><strong>Why ScaleSC</strong></h2>
<div align="center">
<b>ScaleSC Pipeline</b>
<img src="./img/pipeline.png" alt="time-comp" width="100%" height="auto">
ScaleSC includes regular prerpocessing steps: QC, Filtering, HVG, PCA, Batch Correction, Clustering, Annotation. 
</div>

<p><br></p>
<div align="center">

<b>Overview of 3 different packages*</b>

<table border="1">
  <thead>
    <tr>
      <th></th>
      <th>scanpy</th>
      <th>scalesc</th>
      <th>rapids-singlecell</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>GPU Support</strong></td>
      <td>❌</td>
      <td>✅</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>int32 Issue</strong></td>
      <td>❌</td>
      <td>❌</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Upper Limit of # Cells</strong></td>
      <td>♾️</td>
      <td>~20M</td>
      <td>~1M</td>
    </tr>
    <tr>
      <td><strong>Upper Limit of # Samples</strong></td>
      <td>♾️</td>
      <td>>1000</td>
      <td><100</td>
    </tr>
  </tbody>
</table>
* Test on datasets with ~35k genes. ScaleSC only support to run Harmony on a single GPU, this memory limitation greatly limits the capability of scaling to even larger dataset. However, there would be no limitation on number of cells if you prefer not to run Harmony (QC, HVG, and PCA only).  
</div>

<p><br></p>
<div align="center">
<b>Time comparsion between Scanpy(CPU) and ScaleSC(GPU) on A100(80G)</b>
<img src="./img/time_comp.png" alt="time-comp" width="100%" height="auto">

ScaleSC significantly reduces running time from hours to several minutes. For the extremely large 13M dataset, ScaleSC can finish all steps in just 1 hour!
</div>

<p><br></p>
<h2 id="how-to-install"><strong>How To Install</strong></h2>
<blockquote>
<p>Note: ScaleSC requires a <strong>high-end GPU</strong> (&gt; 24G VRAM) and a matching <strong>CUDA</strong> version to support GPU-accelerated computing.</p>
</blockquote>
<p><strong>Requirements</strong>:</p>
<ul>
<li><a href="https://rapids.ai/"><strong>RAPIDS</strong></a> from Nvidia</li>
<li><a href="https://rapids-singlecell.readthedocs.io/en/latest/index.html"><strong>rapids-singlecell</strong></a>, an alternative of <em>scanpy</em> that employs GPU for acceleration. </li>
<li><a href="https://docs.conda.io/projects/conda/en/latest/index.html"><strong>Conda</strong></a>, version &gt;=22.11 is strongly encoruaged, because <em>conda-libmamba-solver</em> is set as default, which significant speeds up solving dependencies.  </li>
<li><a href=""><strong>pip</strong></a>, a python package installer.</li>
</ul>
<p><strong>Environment Setup</strong>:</p>
<ol>
<li>
<p>Install <a href="https://rapids.ai/"><strong>RAPIDS</strong></a> through Conda,</p>
<ul>
<li><code>conda create -n scalesc -c rapidsai -c conda-forge -c nvidia rapids=24.10 python=3.10 'cuda-version&gt;=11.4,&lt;=11.8'</code></li>
</ul>
<p>Users have flexibility to install it according to their systems by using this <a href="https://docs.rapids.ai/install/?_gl=1*1em94gj*_ga*OTg5MDQyNDkyLjE3MjM0OTAyNjk.*_ga_RKXFW6CM42*MTczMDIxNzIzOS4yLjAuMTczMDIxNzIzOS42MC4wLjA.#selector">online selector</a>.</p>
</li>
<li>
<p>Activate conda env,</p>
<ul>
<li><code>conda activate scalesc</code></li>
</ul>
</li>
<li>
<p>Install <a href="https://rapids-singlecell.readthedocs.io/en/latest/index.html"><strong>rapids-singlecell</strong></a> using pip, </p>
<ul>
<li><code>pip install rapids-singlecell</code> </li>
</ul>
</li>
<li>
<p>Install scaleSC,</p>
<ul>
<li>pull scaleSC from github<ul>
<li><code>git clone https://github.com/interactivereport/scaleSC.git</code></li>
</ul>
</li>
<li>enter the folder and install scaleSC<ul>
<li><code>cd scaleSC</code></li>
<li><code>pip install .</code></li>
</ul>
</li>
</ul>
</li>
<li>check env:<ul>
<li><code>python -c "import scalesc; print(scalesc.__version__)"</code> == 0.1.0</li>
<li><code>python -c "import cupy; print(cupy.__version__)"</code> &gt;= 13.3.0</li>
<li><code>python -c "import cuml; print(cuml.__version__)"</code> &gt;= 24.10</li>
<li><code>python -c "import cupy; print(cupy.cuda.is_available())"</code> = True</li>
<li><code>python -c "import xgboost; print(xgboost.__version__)</code> &gt;= 2.1.1, optionally for marker annotation</li>
</ul>
</li>
</ol>
<h2 id="tutorial"><strong>Tutorial</strong></h2>
<ul>
<li>See <a href="https://github.com/interactivereport/scaleSC/blob/main/Tutorial_scaleSC.ipynb">this tutorial</a> for details.</li>
</ul></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js"></script>
        <script src="search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

<!--
MkDocs version : 1.6.1
Build Date UTC : 2024-11-07 20:38:08.468697+00:00
-->
